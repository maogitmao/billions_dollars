# 测试清单

## 功能测试

### 1. 基础功能测试

- [ ] 程序启动正常
- [ ] 输入法可以切换中文
- [ ] 行情数据正常刷新
- [ ] K线图正常显示
- [ ] 分时图正常显示
- [ ] AI对话正常工作

### 2. 信息爬虫测试

#### 2.1 基本操作
- [ ] 选择股票后，"获取信息"按钮可点击
- [ ] 点击后按钮变为禁用状态
- [ ] 状态栏显示"正在获取..."
- [ ] 5-10秒后获取完成
- [ ] 按钮恢复可点击状态

#### 2.2 数据获取
- [ ] 公司信息获取成功（6项）
- [ ] 财务数据获取成功（9项）
- [ ] 资金流向获取成功（5项）
- [ ] 股东信息获取成功（3项）
- [ ] 研究报告获取成功（最多5条）
- [ ] 公告信息获取成功（最多20条）
- [ ] 新闻资讯获取成功（最多20条）

#### 2.3 数据显示
- [ ] 日志区域显示完整信息
- [ ] 格式化输出清晰易读
- [ ] 中文显示正常
- [ ] 数字格式正确（保留2位小数）
- [ ] 状态栏显示统计信息

#### 2.4 AI集成
- [ ] 获取信息后AI自动分析
- [ ] AI对话框显示"正在分析..."
- [ ] AI分析结果正常显示
- [ ] 可以继续与AI对话

### 3. 异常处理测试

#### 3.1 网络异常
- [ ] 网络断开时显示错误信息
- [ ] 部分数据获取失败不影响其他数据
- [ ] 错误信息清晰明确

#### 3.2 数据异常
- [ ] 股票代码不存在时提示错误
- [ ] 数据为空时显示"暂无数据"
- [ ] 数据格式错误时不崩溃

#### 3.3 UI异常
- [ ] 快速点击不会重复请求
- [ ] 获取过程中UI不卡顿
- [ ] 可以正常切换股票

### 4. 性能测试

- [ ] 获取信息耗时 < 10秒
- [ ] UI响应流畅
- [ ] 内存占用正常（< 300MB）
- [ ] CPU占用正常（< 60%）

### 5. 兼容性测试

- [ ] Ubuntu 20.04+ 正常运行
- [ ] Python 3.8+ 正常运行
- [ ] fcitx5 输入法正常
- [ ] 不同分辨率下显示正常

## 测试用例

### 用例1：正常获取信息

**前置条件**：
- 程序已启动
- 网络连接正常

**测试步骤**：
1. 在行情列表中选择"600519"
2. 点击"📥 获取信息"按钮
3. 等待5-10秒

**预期结果**：
- 状态栏显示"✅ 获取成功：10条公告，15条新闻，5条研报，资金流向，股东信息"
- 日志区域显示完整信息
- AI自动分析

### 用例2：网络异常

**前置条件**：
- 程序已启动
- 断开网络连接

**测试步骤**：
1. 选择任意股票
2. 点击"📥 获取信息"按钮
3. 等待超时

**预期结果**：
- 显示错误信息
- 程序不崩溃
- 可以继续操作

### 用例3：快速切换股票

**前置条件**：
- 程序已启动
- 网络连接正常

**测试步骤**：
1. 选择"600519"
2. 点击"获取信息"
3. 立即选择"000001"
4. 再次点击"获取信息"

**预期结果**：
- 第一次请求被取消或完成
- 第二次请求正常执行
- 不会出现数据混乱

### 用例4：AI分析

**前置条件**：
- 已获取股票信息
- AI服务正常

**测试步骤**：
1. 获取"600519"信息
2. 等待AI自动分析
3. 在AI输入框输入"主力资金流入说明什么？"
4. 按回车发送

**预期结果**：
- AI自动分析完成
- 可以继续对话
- 回复内容相关

## 测试脚本

### 快速测试
```bash
# 测试爬虫基本功能
PYTHONPATH=. python3 tests/quick_test_crawler.py
```

### 完整测试
```bash
# 测试所有功能
PYTHONPATH=. python3 tests/test_crawler_enhanced.py
```

### 性能测试
```bash
# 测试性能
python3 tests/test_performance.py
```

## 测试结果记录

### 测试日期：2026-01-29

#### 功能测试结果
- ✅ 代码编译通过
- ✅ 新闻获取成功（15条）
- ⚠️ 部分接口因网络问题暂时不可用（正常现象）

#### 性能测试结果
- 获取信息耗时：5-10秒
- UI响应：流畅
- 内存占用：约200MB
- CPU占用：约40-50%

#### 兼容性测试结果
- ✅ Ubuntu 22.04 正常
- ✅ Python 3.10 正常
- ✅ fcitx5 输入法正常

## 已知问题

1. **网络连接问题**
   - 部分数据源可能因网络问题暂时不可用
   - 解决方案：稍后重试

2. **数据延迟**
   - 数据可能存在1-5分钟延迟
   - 解决方案：以实际交易为准

3. **研报数据**
   - 部分股票可能没有研报数据
   - 解决方案：正常现象，不影响使用

## 测试通过标准

- [ ] 所有基础功能正常
- [ ] 至少70%的数据获取成功
- [ ] 无严重bug
- [ ] 性能指标达标
- [ ] 用户体验良好

## 下一步

- [ ] 修复已知问题
- [ ] 优化性能
- [ ] 添加更多数据源
- [ ] 改进AI分析
